<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>英語オタクののたまり場</title>
    <!-- Font Awesome (アイコン用) を追加 -->
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="english.css">
    
</head>
<body>
    <header>
        <!-- 画像をヘッダーの背景として配置 -->
        <img src="english.jpg" alt="英語のイメージ" id="header-image">
        
        <!-- ★修正点: 画像の上に重ねるためのコンテナ (.header-content) を追加★ -->
        <div class="header-content">
            <h1>英語オタクのたまり場</h1>
            <p>このサイトは英語について議論するサイトです。（好きなアクセントは？どうやって単語覚える？など）できることは主に、以下の３つです</p>
            <nav>
                <li>1.英語に関する話題を投稿</li>
                <li>2.投稿に対して、いいねや返信で参加</li>
                <li>3.話題への反応を見て考察や語り合って楽しむ</li>
            </nav>
            <nav> 
                <p>禁止事項は以下の１つです</p>
                <li>1.いかなる誹謗中傷を目的としたコメントも行わない</li>
            </nav>
        </div>
    </header>
    
  <div class="share-container">
        <a 
            href="#" 
            id="lineShareButton"
            class="share-button line"
        >
            LINE <i class="fab fa-line"></i> 
        </a>
    </div>

    <main>
        <p>気に入った人は、拡散よろしく↑↑↑</p>
        <input id="author" placeholder="ニックネーム(メイン投稿用/省略可)" value="">
        <textarea id="content" placeholder="コメントしてください" ></textarea>
        <button id="postButton">投稿する</button>

        <div id="posts">
            </div>
    </main>

    <div id="replyModal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h3>投稿に返信する</h3>
            <input id="replyAuthor" placeholder="ニックネーム (省略可)" value="">
            <textarea id="replyContent" placeholder="返信コメントを入力してください" ></textarea>
            <button id="submitReplyButton">返信を送信</button>
            <p class="reply-note">※ニックネームを省略した場合、「匿名返信」となります。</p>
        </div>
    </div>
    <aside>
        <p>サービスご利用にあたって</p> 
         <p><a href="tukau.html">サービスガイドライン</a></p>
         <p><a href="privacy.html">タマリバスポット規約</a></p>
        <p><a href="contact.html">お問い合わせ・削除依頼</a></p>
    </aside>

    <!-- Firebase SDKのインポート (元のコードから変更なし) -->
    <script type="module">
        // 必要な関数を CDN からインポート
        import { 
            initializeApp 
        } from 'https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js';
        import { 
            getFirestore, 
            collection, 
            addDoc, 
            query, 
            orderBy, 
            onSnapshot, 
            serverTimestamp,
            // --- ★追加・修正した関数★ ---
            doc, 
            updateDoc, 
            increment,
            arrayUnion,
            arrayRemove,
            getDoc,
            // -----------------------------
        } from 'https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js';

        // あなたの Firebase 設定
        const firebaseConfig = {
    apiKey: "AIzaSyDkpOXE5Jimn8yOQG49W9Og2YfgVLNpBiA",
    authDomain: "english-d08a5.firebaseapp.com",
    projectId: "english-d08a5",
    storageBucket: "english-d08a5.firebasestorage.app",
    messagingSenderId: "502688382476",
    appId: "1:502688382476:web:40f356693ba1daf75cf829",
    measurementId: "G-SYT2NF0M3K"
        };

        // Firebase の初期化
        const app = initializeApp(firebaseConfig);
        
        // Firestore のインスタンスを取得
        const db = getFirestore(app);

        // 投稿処理を script.js で行うために、必要な関数とインスタンスをグローバルに公開します。
        window.db = db;
        window.collection = collection;
        window.addDoc = addDoc;
        window.query = query;
        window.orderBy = orderBy;
        window.onSnapshot = onSnapshot;
        window.serverTimestamp = serverTimestamp;
        // --- ★追加・修正した関数を公開★ ---
        window.doc = doc;
        window.updateDoc = updateDoc;
        window.increment = increment;
        window.arrayUnion = arrayUnion;
        window.arrayRemove = arrayRemove;
        window.getDoc = getDoc;
        // ------------------------------------
    </script>
    
    <!-- 投稿処理のスクリプト -->
    <script type="module" src="english.js"></script>
</body>

</htm




